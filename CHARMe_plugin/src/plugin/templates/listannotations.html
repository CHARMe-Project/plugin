<div data-ng-include="'templates/header.html'"></div>
<div class="modal-body modal-body-list" data-ng-init="searchOpen=true" >
    <div data-ng-class="['search-container', 'search-' + (searchOpen ? 'open' : 'collapsed')]" >
       <div class="btn search-button-holder" data-ng-click="searchOpen = !searchOpen" style="float:right;">
           <span data-ng-class="searchOpen ? 'icon-chevron-left' : 'icon-search'"></span>
       </div>
       <div class="search-content">
           <div data-ng-show="searchOpen">
               <h5>Search Annotations</h5>
               <hr />
               <div data-ng-include="'templates/charmesearch.html'"></div>
           </div>
       </div>
    </div>
    <div data-ng-class="'search-results-' + (searchOpen ? 'open' : 'collapsed')">
        <!--
        <form class="form-search">
            <input data-ng-model="searchText" type="text" class="input-medium search-query annoListSearch" placeholder="Search this page of results...">
        </form> -->
        <div class="alert alert-error" data-ng-show="errorMsg">{{errorMsg}}</div>



        <table class="table table-condensed" style="border-collapse:collapse;">
            <tbody>
                <tr data-toggle="collapse" data-target="#demo1" class="accordion-toggle">
                    <td><i>Viewing Annotations for : </i></td>
                    <td><b>{{ targetIdKey }}</b></td>
                </tr>
                <tr >
                    <td colspan="6" class="hiddenRow">
                        <div class="accordian-body collapse" id="demo1">
                            <select size="3" style="width:450px" font-size="15px"  ng-model="selectedOption">

                                <option data-ng-click="refreshDatasetSelection(key)" data-ng-repeat="(key, value) in datasets" value="{{key}}">{{value}}</option>
                            </select>
                        </div>
                    </td>
                </tr>

                <tr>
                    <th></th>
                </tr>

            </tbody>
        </table>

<!--
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                Datasets
                            </a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <select size="3" style="width:400px" font-size="15px" multiple>
                                <option data-ng-repeat="(key, value) in datasets" value="{{key}}">{{key}}</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
-->

<!--
        <div>
            <table class="table">
                <tr>
                    <td>
                        <label><b>Datasets</b></label>
                    </td>
                    <td>
                        <select size="3" style="width:400px" font-size="15px" multiple>
                            <option data-ng-repeat="(key, value) in datasets" value="{{key}}">{{key}}</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
-->

<!--
 <div class="control-group" >
     <label class="control-label" >Dataset(s)</label>

     <div class="controls" ng-controller="DatasetCtrl">
         <select ng-model="selectedDatasets" ng-options="dataset.name for dataset in selectedDatasets"
                 placeholder="Selected datasets...">
         </select>
     </div>
 </div>
 -->

        
        <table class="table">
            <thead><tr><td>Title</td><td>Annotated by</td><td>Organisation</td><td>Date</td></tr></thead>
            <tbody>
                <tr data-ng-hide="!loading">
                    <td colspan="4" class="spinner spinner-small">
                    <img src ="img/ajaxspinner.gif" />
                    </td>
                </tr>
                <tr data-ng-show="!loading && entries.length===0"><td colspan="4">No annotations.</td></tr>
                <tr data-ng-repeat="entry in entries">
                    <td><a href="" data-ng-click="viewAnnotation(entry.id)" title="{{entry.title | truncate:150}}">{{entry.title | truncate:75}}</a></td>
                    <td>{{entry.author}}</td>
                    <td>{{entry.organization}}</td>
                    <td>{{entry.updated | date:'d/M/yyyy'}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div data-ng-include="'templates/footer.html'"></div>